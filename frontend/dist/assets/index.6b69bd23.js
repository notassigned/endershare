(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function U(){}function Xe(t){return t()}function Me(){return Object.create(null)}function q(t){t.forEach(Xe)}function Ze(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function st(t){return Object.keys(t).length===0}function it(t,...e){if(t==null)return U;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Q(t,e,n){t.$$.on_destroy.push(it(e,n))}function r(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function Ee(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function b(){return D(" ")}function Fe(){return D("")}function F(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function ye(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function rt(t){return Array.from(t.childNodes)}function K(t,e){e=""+e,t.data!==e&&(t.data=e)}function ce(t,e){t.value=e==null?"":e}function ue(t,e,n){t.classList[n?"add":"remove"](e)}let he;function _e(t){he=t}function xe(){if(!he)throw new Error("Function called outside component initialization");return he}function ge(t){xe().$$.on_mount.push(t)}function ot(t){xe().$$.on_destroy.push(t)}function we(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const re=[],Pe=[];let oe=[];const Ne=[],ct=Promise.resolve();let je=!1;function ut(){je||(je=!0,ct.then(et))}function Se(t){oe.push(t)}const Ce=new Set;let se=0;function et(){if(se!==0)return;const t=he;do{try{for(;se<re.length;){const e=re[se];se++,_e(e),at(e.$$)}}catch(e){throw re.length=0,se=0,e}for(_e(null),re.length=0,se=0;Pe.length;)Pe.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];Ce.has(n)||(Ce.add(n),n())}oe.length=0}while(re.length);for(;Ne.length;)Ne.pop()();je=!1,Ce.clear(),_e(t)}function at(t){if(t.fragment!==null){t.update(),q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Se)}}function ft(t){const e=[],n=[];oe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),oe=e}const ke=new Set;let te;function tt(){te={r:0,c:[],p:te}}function nt(){te.r||q(te.c),te=te.p}function X(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function x(t,e,n,l){if(t&&t.o){if(ke.has(t))return;ke.add(t),te.c.push(()=>{ke.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ve(t){t&&t.c()}function ae(t,e,n,l){const{fragment:s,after_update:o}=t.$$;s&&s.m(e,n),l||Se(()=>{const i=t.$$.on_mount.map(Xe).filter(Ze);t.$$.on_destroy?t.$$.on_destroy.push(...i):q(i),t.$$.on_mount=[]}),o.forEach(Se)}function fe(t,e){const n=t.$$;n.fragment!==null&&(ft(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){t.$$.dirty[0]===-1&&(re.push(t),ut(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function de(t,e,n,l,s,o,i,f=[-1]){const c=he;_e(t);const a=t.$$={fragment:null,ctx:[],props:o,update:U,not_equal:s,bound:Me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Me(),dirty:f,skip_bound:!1,root:e.target||c.$$.root};i&&i(a.root);let p=!1;if(a.ctx=n?n(t,e.props||{},(m,g,...y)=>{const _=y.length?y[0]:g;return a.ctx&&s(a.ctx[m],a.ctx[m]=_)&&(!a.skip_bound&&a.bound[m]&&a.bound[m](_),p&&dt(t,m)),g}):[],a.update(),p=!0,q(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const m=rt(e.target);a.fragment&&a.fragment.l(m),m.forEach(A)}else a.fragment&&a.fragment.c();e.intro&&X(t.$$.fragment),ae(t,e.target,e.anchor,e.customElement),et()}_e(c)}class pe{$destroy(){fe(this,1),this.$destroy=U}$on(e,n){if(!Ze(n))return U;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!st(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function pt(t){return window.go.main.App.AddFile(t)}function mt(t){return window.go.main.App.BindPeerWithPhrase(t)}function _t(){return window.go.main.App.CancelBinding()}function ht(t,e){return window.go.main.App.CreateFolder(t,e)}function vt(){return window.go.main.App.CreateNewVault()}function bt(t,e){return window.go.main.App.DeleteFile(t,e)}function kt(t){return window.go.main.App.DeleteFolder(t)}function wt(t,e){return window.go.main.App.ExportFile(t,e)}function yt(){return window.go.main.App.GetAppState()}function gt(t){return window.go.main.App.GetFolderPath(t)}function Ct(){return window.go.main.App.GetPeers()}function jt(){return window.go.main.App.GetSyncPhrase()}function lt(){return window.go.main.App.IsMaster()}function St(t){return window.go.main.App.ListFolder(t)}function zt(t){return window.go.main.App.RemovePeer(t)}function At(){return window.go.main.App.StartReplicaBinding()}function Et(t){return window.go.main.App.UnlockWithMnemonic(t)}const ie=[];function me(t,e=U){let n;const l=new Set;function s(f){if(le(t,f)&&(t=f,n)){const c=!ie.length;for(const a of l)a[1](),ie.push(a,t);if(c){for(let a=0;a<ie.length;a+=2)ie[a][0](ie[a+1]);ie.length=0}}}function o(f){s(f(t))}function i(f,c=U){const a=[f,c];return l.add(a),l.size===1&&(n=e(s)||U),f(t),()=>{l.delete(a),l.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:i}}const ne=me("fresh"),be=me(0),ze=me(!1),O=me(!1),V=me(""),Ae=me("");function Le(t){let e,n;return{c(){e=d("p"),n=D(t[1]),u(e,"class","error svelte-1na3fmb")},m(l,s){E(l,e,s),r(e,n)},p(l,s){s&2&&K(n,l[1])},d(l){l&&A(e)}}}function Ft(t){let e,n,l,s,o,i,f,c,a,p,m,g,y,_,j,S,h=t[1]&&Le(t);return{c(){e=d("div"),n=d("h1"),n.textContent="Endershare",l=b(),s=d("p"),s.textContent="Encrypted P2P File Storage",o=b(),i=d("div"),f=d("button"),c=D(`Create New Vault
      `),a=d("span"),a.textContent="Generate a new encryption key",p=b(),m=d("button"),g=D(`Join Existing Vault
      `),y=d("span"),y.textContent="Connect to another device",_=b(),h&&h.c(),u(n,"class","svelte-1na3fmb"),u(s,"class","subtitle svelte-1na3fmb"),u(a,"class","btn-desc svelte-1na3fmb"),u(f,"class","setup-btn primary svelte-1na3fmb"),f.disabled=t[0],u(y,"class","btn-desc svelte-1na3fmb"),u(m,"class","setup-btn secondary svelte-1na3fmb"),m.disabled=t[0],u(i,"class","setup-options svelte-1na3fmb"),u(e,"class","setup-screen svelte-1na3fmb")},m(k,C){E(k,e,C),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(i,f),r(f,c),r(f,a),r(i,p),r(i,m),r(m,g),r(m,y),r(e,_),h&&h.m(e,null),j||(S=[F(f,"click",t[2]),F(m,"click",t[3])],j=!0)},p(k,[C]){C&1&&(f.disabled=k[0]),C&1&&(m.disabled=k[0]),k[1]?h?h.p(k,C):(h=Le(k),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:U,o:U,d(k){k&&A(e),h&&h.d(),j=!1,q(S)}}}function Mt(t,e,n){let l,s;Q(t,O,f=>n(0,l=f)),Q(t,V,f=>n(1,s=f));async function o(){O.set(!0),V.set("");try{const f=await vt();Ae.set(f),ne.set("unlocked")}catch(f){V.set(String(f))}finally{O.set(!1)}}async function i(){O.set(!0),V.set("");try{await At(),ne.set("binding")}catch(f){V.set(String(f))}finally{O.set(!1)}}return[l,s,o,i]}class Pt extends pe{constructor(e){super(),de(this,e,Mt,Ft,le,{})}}function Nt(t,e,n){return window.runtime.EventsOnMultiple(t,e,n)}function Lt(t,e){return Nt(t,e,-1)}function Dt(t){let e,n,l,s,o,i,f=(t[0]||"Loading...")+"",c,a,p,m,g,y,_,j,S,h;return{c(){e=d("div"),n=d("h1"),n.textContent="Waiting for Authorization",l=b(),s=d("p"),s.textContent="Enter this phrase on your master device to authorize this replica:",o=b(),i=d("div"),c=D(f),a=b(),p=d("div"),m=b(),g=d("p"),g.textContent="Waiting for master node to connect...",y=b(),_=d("button"),j=D("Cancel"),u(n,"class","svelte-yhfyra"),u(s,"class","instruction svelte-yhfyra"),u(i,"class","phrase-display svelte-yhfyra"),u(p,"class","spinner svelte-yhfyra"),u(g,"class","waiting-text svelte-yhfyra"),u(_,"class","cancel-btn svelte-yhfyra"),_.disabled=t[1],u(e,"class","binding-screen svelte-yhfyra")},m(k,C){E(k,e,C),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(i,c),r(e,a),r(e,p),r(e,m),r(e,g),r(e,y),r(e,_),r(_,j),S||(h=F(_,"click",t[2]),S=!0)},p(k,[C]){C&1&&f!==(f=(k[0]||"Loading...")+"")&&K(c,f),C&2&&(_.disabled=k[1])},i:U,o:U,d(k){k&&A(e),S=!1,h()}}}function $t(t,e,n){let l;Q(t,O,f=>n(1,l=f));let s="",o;ge(async()=>{n(0,s=await jt()),o=Lt("binding-complete",()=>{ne.set("locked")})}),ot(()=>{o&&o()});async function i(){O.set(!0),await _t(),ne.set("fresh"),O.set(!1)}return[s,l,i]}class Bt extends pe{constructor(e){super(),de(this,e,$t,Dt,le,{})}}function De(t){let e,n;return{c(){e=d("p"),n=D(t[2]),u(e,"class","error svelte-fim5w1")},m(l,s){E(l,e,s),r(e,n)},p(l,s){s&4&&K(n,l[2])},d(l){l&&A(e)}}}function It(t){let e,n,l,s,o,i,f,c,a=t[1]?"Unlocking...":"Unlock",p,m,g,y,_,j,S,h=t[2]&&De(t);return{c(){e=d("div"),n=d("h1"),n.textContent="Unlock Vault",l=b(),s=d("p"),s.textContent="Enter your 24-word recovery phrase to decrypt your files.",o=b(),i=d("textarea"),f=b(),c=d("button"),p=D(a),g=b(),h&&h.c(),y=b(),_=d("p"),_.textContent=`Only master nodes with the recovery phrase can view files.
    Replica nodes cannot decrypt file contents.`,u(n,"class","svelte-fim5w1"),u(s,"class","instruction svelte-fim5w1"),u(i,"class","mnemonic-input svelte-fim5w1"),u(i,"placeholder","Enter your recovery phrase..."),u(i,"rows","4"),i.disabled=t[1],u(c,"class","unlock-btn svelte-fim5w1"),c.disabled=m=t[1]||!t[0].trim(),u(_,"class","note svelte-fim5w1"),u(e,"class","mnemonic-screen svelte-fim5w1")},m(k,C){E(k,e,C),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),ce(i,t[0]),r(e,f),r(e,c),r(c,p),r(e,g),h&&h.m(e,null),r(e,y),r(e,_),j||(S=[F(i,"input",t[5]),F(i,"keydown",t[4]),F(c,"click",t[3])],j=!0)},p(k,[C]){C&2&&(i.disabled=k[1]),C&1&&ce(i,k[0]),C&2&&a!==(a=k[1]?"Unlocking...":"Unlock")&&K(p,a),C&3&&m!==(m=k[1]||!k[0].trim())&&(c.disabled=m),k[2]?h?h.p(k,C):(h=De(k),h.c(),h.m(e,y)):h&&(h.d(1),h=null)},i:U,o:U,d(k){k&&A(e),h&&h.d(),j=!1,q(S)}}}function Ot(t,e,n){let l,s;Q(t,O,a=>n(1,l=a)),Q(t,V,a=>n(2,s=a));let o="";async function i(){if(!o.trim()){V.set("Please enter your recovery phrase");return}O.set(!0),V.set("");try{await Et(o.trim()),ne.set("unlocked")}catch(a){V.set(String(a))}finally{O.set(!1)}}function f(a){a.key==="Enter"&&i()}function c(){o=this.value,n(0,o)}return[o,l,s,i,f,c]}class Rt extends pe{constructor(e){super(),de(this,e,Ot,It,le,{})}}function $e(t,e,n){const l=t.slice();return l[20]=e[n],l}function Gt(t){let e,n=t[0],l=[];for(let s=0;s<n.length;s+=1)l[s]=Be($e(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();u(e,"class","peer-list svelte-16cmzd")},m(s,o){E(s,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,o){if(o&129){n=s[0];let i;for(i=0;i<n.length;i+=1){const f=$e(s,n,i);l[i]?l[i].p(f,o):(l[i]=Be(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&A(e),Ee(l,s)}}}function Tt(t){let e;return{c(){e=d("p"),e.textContent="No connected devices",u(e,"class","empty svelte-16cmzd")},m(n,l){E(n,e,l)},p:U,d(n){n&&A(e)}}}function Be(t){let e,n,l,s,o,i=t[20].peerId+"",f,c,a,p,m=(t[20].isOnline?"Online":t[20].lastSeen)+"",g,y,_,j,S,h;function k(){return t[15](t[20])}return{c(){e=d("div"),n=d("div"),l=d("span"),s=b(),o=d("span"),f=D(i),c=b(),a=d("div"),p=d("span"),g=D(m),y=b(),_=d("button"),_.textContent="\u2715",j=b(),u(l,"class","status-dot svelte-16cmzd"),ue(l,"online",t[20].isOnline),u(o,"class","peer-id svelte-16cmzd"),u(n,"class","peer-info svelte-16cmzd"),u(p,"class","last-seen svelte-16cmzd"),u(_,"class","remove-btn svelte-16cmzd"),u(_,"title","Remove device"),u(a,"class","peer-meta svelte-16cmzd"),u(e,"class","peer-item svelte-16cmzd")},m(C,N){E(C,e,N),r(e,n),r(n,l),r(n,s),r(n,o),r(o,f),r(e,c),r(e,a),r(a,p),r(p,g),r(a,y),r(a,_),r(e,j),S||(h=F(_,"click",k),S=!0)},p(C,N){t=C,N&1&&ue(l,"online",t[20].isOnline),N&1&&i!==(i=t[20].peerId+"")&&K(f,i),N&1&&m!==(m=(t[20].isOnline?"Online":t[20].lastSeen)+"")&&K(g,m)},d(C){C&&A(e),S=!1,h()}}}function Ie(t){let e;function n(o,i){return o[3]?Vt:Ut}let l=n(t),s=l(t);return{c(){e=d("div"),s.c(),u(e,"class","add-device-section svelte-16cmzd")},m(o,i){E(o,e,i),s.m(e,null)},p(o,i){l===(l=n(o))&&s?s.p(o,i):(s.d(1),s=l(o),s&&(s.c(),s.m(e,null)))},d(o){o&&A(e),s.d()}}}function Ut(t){let e,n,l;return{c(){e=d("button"),e.textContent="+ Add New Device",u(e,"class","add-device-btn svelte-16cmzd")},m(s,o){E(s,e,o),n||(l=F(e,"click",t[18]),n=!0)},p:U,d(s){s&&A(e),n=!1,l()}}}function Vt(t){let e,n,l,s,o,i,f,c,a;return{c(){e=d("div"),n=d("input"),l=b(),s=d("button"),o=D("Bind"),i=b(),f=d("button"),f.textContent="Cancel",u(n,"type","text"),u(n,"class","bind-input svelte-16cmzd"),u(n,"placeholder","Enter 4-word phrase..."),n.autofocus=!0,u(s,"class","action-btn svelte-16cmzd"),s.disabled=t[6],u(f,"class","action-btn secondary svelte-16cmzd"),u(e,"class","bind-input-row svelte-16cmzd")},m(p,m){E(p,e,m),r(e,n),ce(n,t[2]),r(e,l),r(e,s),r(s,o),r(e,i),r(e,f),n.focus(),c||(a=[F(n,"input",t[16]),F(s,"click",t[10]),F(f,"click",t[17])],c=!0)},p(p,m){m&4&&n.value!==p[2]&&ce(n,p[2]),m&64&&(s.disabled=p[6])},d(p){p&&A(e),c=!1,q(a)}}}function Oe(t){let e;return{c(){e=d("p"),e.textContent="Replica nodes sync data but cannot decrypt files without the recovery phrase.",u(e,"class","replica-note svelte-16cmzd")},m(n,l){E(n,e,l)},d(n){n&&A(e)}}}function Re(t){let e,n,l,s,o,i,f,c,a,p,m,g,y,_,j;return{c(){e=d("div"),n=d("div"),l=d("h3"),l.textContent="Remove Device",s=b(),o=d("p"),i=D("Are you sure you want to remove device "),f=D(t[5]),c=D("?"),a=b(),p=d("div"),m=d("button"),m.textContent="Cancel",g=b(),y=d("button"),y.textContent="Remove",u(l,"class","svelte-16cmzd"),u(o,"class","svelte-16cmzd"),u(m,"class","cancel-btn svelte-16cmzd"),u(y,"class","remove-confirm-btn svelte-16cmzd"),u(p,"class","confirm-buttons svelte-16cmzd"),u(n,"class","confirm-modal svelte-16cmzd"),u(n,"role","document"),u(e,"class","confirm-overlay svelte-16cmzd"),u(e,"role","dialog"),u(e,"aria-modal","true")},m(S,h){E(S,e,h),r(e,n),r(n,l),r(n,s),r(n,o),r(o,i),r(o,f),r(o,c),r(n,a),r(n,p),r(p,m),r(p,g),r(p,y),_||(j=[F(m,"click",t[8]),F(y,"click",t[9]),F(n,"click",ye(t[13])),F(e,"click",t[8])],_=!0)},p(S,h){h&32&&K(f,S[5])},d(S){S&&A(e),_=!1,q(j)}}}function Wt(t){let e,n,l,s,o,i,f,c,a,p,m,g,y,_,j,S,h,k,C=t[1]?"Master":"Replica",N,W,Y,P,M,Z;function J(z,$){return z[0].length===0?Tt:Gt}let R=J(t),I=R(t),T=t[1]&&Ie(t),B=!t[1]&&Oe(),L=t[4]&&t[5]&&Re(t);return{c(){e=d("div"),n=d("div"),l=d("div"),s=d("h2"),s.textContent="Settings",o=b(),i=d("button"),i.textContent="\u2715",f=b(),c=d("div"),a=d("h3"),a.textContent="Connected Devices",p=b(),I.c(),m=b(),T&&T.c(),g=b(),y=d("div"),_=d("h3"),_.textContent="Node Info",j=b(),S=d("p"),h=D("Node type: "),k=d("strong"),N=D(C),W=b(),B&&B.c(),Y=b(),L&&L.c(),P=Fe(),u(s,"class","svelte-16cmzd"),u(i,"class","close-btn svelte-16cmzd"),u(l,"class","modal-header svelte-16cmzd"),u(a,"class","svelte-16cmzd"),u(c,"class","section svelte-16cmzd"),u(_,"class","svelte-16cmzd"),u(S,"class","node-type svelte-16cmzd"),u(y,"class","section svelte-16cmzd"),u(n,"class","modal svelte-16cmzd"),u(e,"class","modal-overlay svelte-16cmzd")},m(z,$){E(z,e,$),r(e,n),r(n,l),r(l,s),r(l,o),r(l,i),r(n,f),r(n,c),r(c,a),r(c,p),I.m(c,null),r(c,m),T&&T.m(c,null),r(n,g),r(n,y),r(y,_),r(y,j),r(y,S),r(S,h),r(S,k),r(k,N),r(y,W),B&&B.m(y,null),E(z,Y,$),L&&L.m(z,$),E(z,P,$),M||(Z=[F(window,"keydown",t[12]),F(i,"click",t[11]),F(n,"click",ye(t[14])),F(e,"click",t[11])],M=!0)},p(z,[$]){R===(R=J(z))&&I?I.p(z,$):(I.d(1),I=R(z),I&&(I.c(),I.m(c,m))),z[1]?T?T.p(z,$):(T=Ie(z),T.c(),T.m(c,null)):T&&(T.d(1),T=null),$&2&&C!==(C=z[1]?"Master":"Replica")&&K(N,C),z[1]?B&&(B.d(1),B=null):B||(B=Oe(),B.c(),B.m(y,null)),z[4]&&z[5]?L?L.p(z,$):(L=Re(z),L.c(),L.m(P.parentNode,P)):L&&(L.d(1),L=null)},i:U,o:U,d(z){z&&A(e),I.d(),T&&T.d(),B&&B.d(),z&&A(Y),L&&L.d(z),z&&A(P),M=!1,q(Z)}}}function Kt(t,e,n){let l;Q(t,O,P=>n(6,l=P));let s=[],o=!1,i="",f=!1,c=!1,a=null;ge(async()=>{await p(),n(1,o=await lt())});async function p(){try{n(0,s=await Ct())}catch(P){V.set(String(P))}}function m(P){n(5,a=P),n(4,c=!0)}function g(){n(4,c=!1),n(5,a=null)}async function y(){if(!a)return;const P=a;n(4,c=!1),n(5,a=null),O.set(!0);try{await zt(P),await p()}catch(M){V.set(String(M))}finally{O.set(!1)}}async function _(){if(!!i.trim()){O.set(!0);try{await mt(i.trim()),n(2,i=""),n(3,f=!1),await p()}catch(P){V.set(String(P))}finally{O.set(!1)}}}function j(){ze.set(!1)}function S(P){P.key==="Escape"?j():P.key==="Enter"&&f&&_()}function h(P){we.call(this,t,P)}function k(P){we.call(this,t,P)}const C=P=>m(P.peerId);function N(){i=this.value,n(2,i)}return[s,o,i,f,c,a,l,m,g,y,_,j,S,h,k,C,N,()=>{n(3,f=!1),n(2,i="")},()=>n(3,f=!0)]}class Ht extends pe{constructor(e){super(),de(this,e,Kt,Wt,le,{})}}function Ge(t,e,n){const l=t.slice();return l[35]=e[n],l}function Te(t,e,n){const l=t.slice();return l[38]=e[n],l[40]=n,l}function qt(t){let e;return{c(){e=d("span"),e.textContent="/",u(e,"class","separator svelte-j2wk4r")},m(n,l){E(n,e,l)},d(n){n&&A(e)}}}function Ue(t){let e,n,l=t[38].name+"",s,o,i,f,c=t[40]>0&&qt();function a(){return t[24](t[38])}return{c(){c&&c.c(),e=b(),n=d("button"),s=D(l),o=b(),u(n,"class","path-segment svelte-j2wk4r"),ue(n,"current",t[40]===t[2].length-1)},m(p,m){c&&c.m(p,m),E(p,e,m),E(p,n,m),r(n,s),r(n,o),i||(f=F(n,"click",a),i=!0)},p(p,m){t=p,m[0]&4&&l!==(l=t[38].name+"")&&K(s,l),m[0]&4&&ue(n,"current",t[40]===t[2].length-1)},d(p){c&&c.d(p),p&&A(e),p&&A(n),i=!1,f()}}}function Yt(t){let e,n,l,s,o;return{c(){e=d("button"),e.innerHTML='<span class="icon svelte-j2wk4r">\u{1F4C1}</span> New Folder',n=b(),l=d("button"),l.innerHTML='<span class="icon svelte-j2wk4r">+</span> Add File',u(e,"class","action-btn svelte-j2wk4r"),u(l,"class","action-btn svelte-j2wk4r")},m(i,f){E(i,e,f),E(i,n,f),E(i,l,f),s||(o=[F(e,"click",t[27]),F(l,"click",t[14])],s=!0)},p:U,d(i){i&&A(e),i&&A(n),i&&A(l),s=!1,q(o)}}}function Jt(t){let e,n,l,s,o,i,f;return{c(){e=d("input"),n=b(),l=d("button"),l.textContent="Create",s=b(),o=d("button"),o.textContent="Cancel",u(e,"type","text"),u(e,"class","folder-input svelte-j2wk4r"),u(e,"placeholder","Folder name..."),e.autofocus=!0,u(l,"class","action-btn svelte-j2wk4r"),u(o,"class","action-btn svelte-j2wk4r")},m(c,a){E(c,e,a),ce(e,t[3]),E(c,n,a),E(c,l,a),E(c,s,a),E(c,o,a),e.focus(),i||(f=[F(e,"input",t[25]),F(e,"keydown",t[21]),F(l,"click",t[15]),F(o,"click",t[26])],i=!0)},p(c,a){a[0]&8&&e.value!==c[3]&&ce(e,c[3])},d(c){c&&A(e),c&&A(n),c&&A(l),c&&A(s),c&&A(o),i=!1,q(f)}}}function Qt(t){let e,n=t[1],l=[];for(let s=0;s<n.length;s+=1)l[s]=We(Ge(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Fe()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);E(s,e,o)},p(s,o){if(o[0]&204802){n=s[1];let i;for(i=0;i<n.length;i+=1){const f=Ge(s,n,i);l[i]?l[i].p(f,o):(l[i]=We(f),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){Ee(l,s),s&&A(e)}}}function Xt(t){let e;return{c(){e=d("div"),e.innerHTML=`<p>This folder is empty</p> 
        <p class="hint svelte-j2wk4r">Add files or create folders to get started</p>`,u(e,"class","empty-state svelte-j2wk4r")},m(n,l){E(n,e,l)},p:U,d(n){n&&A(e)}}}function Ve(t){let e,n,l;function s(){return t[29](t[35])}return{c(){e=d("button"),e.textContent="\u2193",u(e,"class","item-btn svelte-j2wk4r"),u(e,"title","Export")},m(o,i){E(o,e,i),n||(l=F(e,"click",s),n=!0)},p(o,i){t=o},d(o){o&&A(e),n=!1,l()}}}function We(t){let e,n,l=t[35].type==="folder"?"\u{1F4C1}":"\u{1F4C4}",s,o,i,f=t[35].name+"",c,a,p,m=Je(t[35].size)+"",g,y,_,j=Qe(t[35].modifiedAt)+"",S,h,k,C,N,W,Y,P,M=t[35].type==="file"&&Ve(t);function Z(){return t[30](t[35])}function J(){return t[31](t[35])}return{c(){e=d("div"),n=d("span"),s=D(l),o=b(),i=d("span"),c=D(f),a=b(),p=d("span"),g=D(m),y=b(),_=d("span"),S=D(j),h=b(),k=d("div"),M&&M.c(),C=b(),N=d("button"),N.textContent="\u2715",W=b(),u(n,"class","item-icon svelte-j2wk4r"),u(i,"class","item-name svelte-j2wk4r"),u(p,"class","item-size svelte-j2wk4r"),u(_,"class","item-date svelte-j2wk4r"),u(N,"class","item-btn delete svelte-j2wk4r"),u(N,"title","Delete"),u(k,"class","item-actions svelte-j2wk4r"),u(e,"class","file-item svelte-j2wk4r"),ue(e,"folder",t[35].type==="folder")},m(R,I){E(R,e,I),r(e,n),r(n,s),r(e,o),r(e,i),r(i,c),r(e,a),r(e,p),r(p,g),r(e,y),r(e,_),r(_,S),r(e,h),r(e,k),M&&M.m(k,null),r(k,C),r(k,N),r(e,W),Y||(P=[F(N,"click",Z),F(e,"dblclick",J)],Y=!0)},p(R,I){t=R,I[0]&2&&l!==(l=t[35].type==="folder"?"\u{1F4C1}":"\u{1F4C4}")&&K(s,l),I[0]&2&&f!==(f=t[35].name+"")&&K(c,f),I[0]&2&&m!==(m=Je(t[35].size)+"")&&K(g,m),I[0]&2&&j!==(j=Qe(t[35].modifiedAt)+"")&&K(S,j),t[35].type==="file"?M?M.p(t,I):(M=Ve(t),M.c(),M.m(k,C)):M&&(M.d(1),M=null),I[0]&2&&ue(e,"folder",t[35].type==="folder")},d(R){R&&A(e),M&&M.d(),Y=!1,q(P)}}}function Ke(t){let e,n,l,s,o,i;return{c(){e=d("div"),n=D(t[9]),l=b(),s=d("button"),s.textContent="\u2715",u(s,"class","svelte-j2wk4r"),u(e,"class","error-bar svelte-j2wk4r")},m(f,c){E(f,e,c),r(e,n),r(e,l),r(e,s),o||(i=F(s,"click",t[32]),o=!0)},p(f,c){c[0]&512&&K(n,f[9])},d(f){f&&A(e),o=!1,i()}}}function He(t){let e,n;return e=new Ht({}),{c(){ve(e.$$.fragment)},m(l,s){ae(e,l,s),n=!0},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function qe(t){let e,n,l,s,o=t[7].type==="folder"?"Folder":"File",i,f,c,a,p=t[7].name+"",m,g,y,_,j,S,h,k,C;return{c(){e=d("div"),n=d("div"),l=d("h2"),s=D("Delete "),i=D(o),f=b(),c=d("p"),a=D('Are you sure you want to delete "'),m=D(p),g=D('"?'),y=b(),_=d("div"),j=d("button"),j.textContent="Cancel",S=b(),h=d("button"),h.textContent="Delete",u(l,"class","svelte-j2wk4r"),u(c,"class","svelte-j2wk4r"),u(j,"class","cancel-btn svelte-j2wk4r"),u(h,"class","delete-btn svelte-j2wk4r"),u(_,"class","modal-buttons svelte-j2wk4r"),u(n,"class","modal confirm-modal svelte-j2wk4r"),u(n,"role","document"),u(e,"class","modal-overlay svelte-j2wk4r"),u(e,"role","dialog"),u(e,"aria-modal","true")},m(N,W){E(N,e,W),r(e,n),r(n,l),r(l,s),r(l,i),r(n,f),r(n,c),r(c,a),r(c,m),r(c,g),r(n,y),r(n,_),r(_,j),r(_,S),r(_,h),k||(C=[F(j,"click",t[18]),F(h,"click",t[19]),F(n,"click",ye(t[23])),F(e,"click",t[18])],k=!0)},p(N,W){W[0]&128&&o!==(o=N[7].type==="folder"?"Folder":"File")&&K(i,o),W[0]&128&&p!==(p=N[7].name+"")&&K(m,p)},d(N){N&&A(e),k=!1,q(C)}}}function Ye(t){let e,n,l,s,o,i,f,c,a,p,m,g,y,_;return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Save Your Recovery Phrase",s=b(),o=d("p"),o.textContent="Write down these words and keep them safe. You will need them to recover your vault.",i=b(),f=d("div"),c=D(t[8]),a=b(),p=d("p"),p.textContent="Anyone with this phrase can access your files. Never share it.",m=b(),g=d("button"),g.textContent="I've Saved My Phrase",u(l,"class","svelte-j2wk4r"),u(o,"class","warning svelte-j2wk4r"),u(f,"class","mnemonic-display svelte-j2wk4r"),u(p,"class","caution svelte-j2wk4r"),u(g,"class","primary-btn svelte-j2wk4r"),u(n,"class","modal svelte-j2wk4r"),u(e,"class","modal-overlay svelte-j2wk4r")},m(j,S){E(j,e,S),r(e,n),r(n,l),r(n,s),r(n,o),r(n,i),r(n,f),r(f,c),r(n,a),r(n,p),r(n,m),r(n,g),y||(_=[F(g,"click",t[20]),F(n,"click",ye(t[22])),F(e,"click",t[20])],y=!0)},p(j,S){S[0]&256&&K(c,j[8])},d(j){j&&A(e),y=!1,q(_)}}}function Zt(t){let e,n,l,s,o,i,f,c,a,p,m,g,y,_,j,S,h,k,C,N,W,Y,P=t[2],M=[];for(let w=0;w<P.length;w+=1)M[w]=Ue(Te(t,P,w));function Z(w,G){return w[4]?Jt:Yt}let J=Z(t),R=J(t);function I(w,G){return w[1].length===0?Xt:Qt}let T=I(t),B=T(t),L=t[9]&&Ke(t),z=t[10]&&He(),$=t[6]&&t[7]&&qe(t),H=t[5]&&Ye(t);return{c(){e=d("div"),n=d("div"),l=d("div"),s=d("button"),o=d("span"),o.textContent="\u2191",f=b(),c=d("div");for(let w=0;w<M.length;w+=1)M[w].c();a=b(),p=d("div"),R.c(),m=b(),g=d("button"),g.innerHTML='<span class="icon svelte-j2wk4r">\u2699</span>',y=b(),_=d("div"),B.c(),j=b(),L&&L.c(),S=b(),z&&z.c(),h=b(),$&&$.c(),k=b(),H&&H.c(),C=Fe(),u(o,"class","icon svelte-j2wk4r"),u(s,"class","nav-btn svelte-j2wk4r"),s.disabled=i=t[0]===0,u(c,"class","breadcrumb svelte-j2wk4r"),u(l,"class","path-section svelte-j2wk4r"),u(g,"class","action-btn settings svelte-j2wk4r"),u(p,"class","actions svelte-j2wk4r"),u(n,"class","top-bar svelte-j2wk4r"),u(_,"class","file-list svelte-j2wk4r"),u(e,"class","file-browser svelte-j2wk4r")},m(w,G){E(w,e,G),r(e,n),r(n,l),r(l,s),r(s,o),r(l,f),r(l,c);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(c,null);r(n,a),r(n,p),R.m(p,null),r(p,m),r(p,g),r(e,y),r(e,_),B.m(_,null),r(e,j),L&&L.m(e,null),E(w,S,G),z&&z.m(w,G),E(w,h,G),$&&$.m(w,G),E(w,k,G),H&&H.m(w,G),E(w,C,G),N=!0,W||(Y=[F(s,"click",t[12]),F(g,"click",t[28])],W=!0)},p(w,G){if((!N||G[0]&1&&i!==(i=w[0]===0))&&(s.disabled=i),G[0]&2052){P=w[2];let v;for(v=0;v<P.length;v+=1){const ee=Te(w,P,v);M[v]?M[v].p(ee,G):(M[v]=Ue(ee),M[v].c(),M[v].m(c,null))}for(;v<M.length;v+=1)M[v].d(1);M.length=P.length}J===(J=Z(w))&&R?R.p(w,G):(R.d(1),R=J(w),R&&(R.c(),R.m(p,m))),T===(T=I(w))&&B?B.p(w,G):(B.d(1),B=T(w),B&&(B.c(),B.m(_,null))),w[9]?L?L.p(w,G):(L=Ke(w),L.c(),L.m(e,null)):L&&(L.d(1),L=null),w[10]?z?G[0]&1024&&X(z,1):(z=He(),z.c(),X(z,1),z.m(h.parentNode,h)):z&&(tt(),x(z,1,1,()=>{z=null}),nt()),w[6]&&w[7]?$?$.p(w,G):($=qe(w),$.c(),$.m(k.parentNode,k)):$&&($.d(1),$=null),w[5]?H?H.p(w,G):(H=Ye(w),H.c(),H.m(C.parentNode,C)):H&&(H.d(1),H=null)},i(w){N||(X(z),N=!0)},o(w){x(z),N=!1},d(w){w&&A(e),Ee(M,w),R.d(),B.d(),L&&L.d(),w&&A(S),z&&z.d(w),w&&A(h),$&&$.d(w),w&&A(k),H&&H.d(w),w&&A(C),W=!1,q(Y)}}}function Je(t){if(t===0)return"";const e=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,n)).toFixed(1)+" "+e[n]}function Qe(t){return t?new Date(t).toLocaleDateString():""}function xt(t,e,n){let l,s,o,i;Q(t,be,v=>n(0,l=v)),Q(t,Ae,v=>n(8,s=v)),Q(t,V,v=>n(9,o=v)),Q(t,ze,v=>n(10,i=v));let f=[],c=[],a="",p=!1,m=!1,g=!1,y=null;ge(async()=>{await lt(),s&&n(5,m=!0)});async function _(v){try{n(1,f=await St(v)),n(2,c=await gt(v))}catch(ee){V.set(String(ee))}}function j(v){be.set(v)}function S(){if(c.length>1){const v=c[c.length-2];be.set(v.folderId)}}function h(v){v.type==="folder"&&be.set(v.folderId)}async function k(){O.set(!0);try{await pt(l),await _(l)}catch(v){V.set(String(v))}finally{O.set(!1)}}async function C(){if(!!a.trim()){O.set(!0);try{await ht(a.trim(),l),n(3,a=""),n(4,p=!1),await _(l)}catch(v){V.set(String(v))}finally{O.set(!1)}}}async function N(v){O.set(!0);try{await wt(v.name,l)}catch(ee){V.set(String(ee))}finally{O.set(!1)}}function W(v){n(7,y=v),n(6,g=!0)}function Y(){n(6,g=!1),n(7,y=null)}async function P(){if(!y)return;const v=y;n(6,g=!1),n(7,y=null),O.set(!0);try{v.type==="folder"?await kt(v.folderId):await bt(v.name,l),await _(l)}catch(ee){V.set(String(ee))}finally{O.set(!1)}}function M(){n(5,m=!1),Ae.set("")}function Z(v){v.key==="Enter"?C():v.key==="Escape"&&(n(4,p=!1),n(3,a=""))}function J(v){we.call(this,t,v)}function R(v){we.call(this,t,v)}const I=v=>j(v.folderId);function T(){a=this.value,n(3,a)}const B=()=>{n(4,p=!1),n(3,a="")},L=()=>n(4,p=!0),z=()=>ze.set(!0),$=v=>N(v),H=v=>W(v),w=v=>h(v),G=()=>V.set("");return t.$$.update=()=>{t.$$.dirty[0]&1&&_(l)},[l,f,c,a,p,m,g,y,s,o,i,j,S,h,k,C,N,W,Y,P,M,Z,J,R,I,T,B,L,z,$,H,w,G]}class en extends pe{constructor(e){super(),de(this,e,xt,Zt,le,{},null,[-1,-1])}}function tn(t){let e;return{c(){e=d("div"),e.textContent="Loading...",u(e,"class","loading svelte-k68acu")},m(n,l){E(n,e,l)},i:U,o:U,d(n){n&&A(e)}}}function nn(t){let e,n;return e=new en({}),{c(){ve(e.$$.fragment)},m(l,s){ae(e,l,s),n=!0},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function ln(t){let e,n;return e=new Rt({}),{c(){ve(e.$$.fragment)},m(l,s){ae(e,l,s),n=!0},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function sn(t){let e,n;return e=new Bt({}),{c(){ve(e.$$.fragment)},m(l,s){ae(e,l,s),n=!0},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function rn(t){let e,n;return e=new Pt({}),{c(){ve(e.$$.fragment)},m(l,s){ae(e,l,s),n=!0},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function on(t){let e,n,l,s;const o=[rn,sn,ln,nn,tn],i=[];function f(c,a){return c[0]==="fresh"?0:c[0]==="binding"?1:c[0]==="locked"?2:c[0]==="unlocked"?3:4}return n=f(t),l=i[n]=o[n](t),{c(){e=d("main"),l.c(),u(e,"class","svelte-k68acu")},m(c,a){E(c,e,a),i[n].m(e,null),s=!0},p(c,[a]){let p=n;n=f(c),n!==p&&(tt(),x(i[p],1,1,()=>{i[p]=null}),nt(),l=i[n],l||(l=i[n]=o[n](c),l.c()),X(l,1),l.m(e,null))},i(c){s||(X(l),s=!0)},o(c){x(l),s=!1},d(c){c&&A(e),i[n].d()}}}function cn(t,e,n){let l;return Q(t,ne,s=>n(0,l=s)),ge(async()=>{const s=await yt();ne.set(s)}),[l]}class un extends pe{constructor(e){super(),de(this,e,cn,on,le,{})}}new un({target:document.getElementById("app")});
