(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function U(){}function Ze(t){return t()}function Pe(){return Object.create(null)}function Y(t){t.forEach(Ze)}function xe(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ot(t){return Object.keys(t).length===0}function ct(t,...e){if(t==null)return U;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function X(t,e,n){t.$$.on_destroy.push(ct(e,n))}function r(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function Fe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function v(){return D(" ")}function Me(){return D("")}function F(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function ge(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function at(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function ce(t,e){t.value=e==null?"":e}function ae(t,e,n){t.classList[n?"add":"remove"](e)}let be;function he(t){be=t}function et(){if(!be)throw new Error("Function called outside component initialization");return be}function Ce(t){et().$$.on_mount.push(t)}function tt(t){et().$$.on_destroy.push(t)}function ye(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const re=[],Ne=[];let oe=[];const Le=[],ut=Promise.resolve();let Se=!1;function ft(){Se||(Se=!0,ut.then(nt))}function ze(t){oe.push(t)}const je=new Set;let se=0;function nt(){if(se!==0)return;const t=be;do{try{for(;se<re.length;){const e=re[se];se++,he(e),dt(e.$$)}}catch(e){throw re.length=0,se=0,e}for(he(null),re.length=0,se=0;Ne.length;)Ne.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];je.has(n)||(je.add(n),n())}oe.length=0}while(re.length);for(;Le.length;)Le.pop()();Se=!1,je.clear(),he(t)}function dt(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}function pt(t){const e=[],n=[];oe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),oe=e}const we=new Set;let te;function lt(){te={r:0,c:[],p:te}}function st(){te.r||Y(te.c),te=te.p}function Z(t,e){t&&t.i&&(we.delete(t),t.i(e))}function ee(t,e,n,l){if(t&&t.o){if(we.has(t))return;we.add(t),te.c.push(()=>{we.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ve(t){t&&t.c()}function ue(t,e,n,l){const{fragment:s,after_update:o}=t.$$;s&&s.m(e,n),l||ze(()=>{const i=t.$$.on_mount.map(Ze).filter(xe);t.$$.on_destroy?t.$$.on_destroy.push(...i):Y(i),t.$$.on_mount=[]}),o.forEach(ze)}function fe(t,e){const n=t.$$;n.fragment!==null&&(pt(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(t,e){t.$$.dirty[0]===-1&&(re.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function de(t,e,n,l,s,o,i,f=[-1]){const c=be;he(t);const u=t.$$={fragment:null,ctx:[],props:o,update:U,not_equal:s,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Pe(),dirty:f,skip_bound:!1,root:e.target||c.$$.root};i&&i(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(m,y,...w)=>{const _=w.length?w[0]:y;return u.ctx&&s(u.ctx[m],u.ctx[m]=_)&&(!u.skip_bound&&u.bound[m]&&u.bound[m](_),p&&mt(t,m)),y}):[],u.update(),p=!0,Y(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const m=at(e.target);u.fragment&&u.fragment.l(m),m.forEach(A)}else u.fragment&&u.fragment.c();e.intro&&Z(t.$$.fragment),ue(t,e.target,e.anchor,e.customElement),nt()}he(c)}class pe{$destroy(){fe(this,1),this.$destroy=U}$on(e,n){if(!xe(n))return U;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function _t(t){return window.go.main.App.AddFile(t)}function ht(t){return window.go.main.App.BindPeerWithPhrase(t)}function bt(){return window.go.main.App.CancelBinding()}function vt(t,e){return window.go.main.App.CreateFolder(t,e)}function kt(){return window.go.main.App.CreateNewVault()}function wt(t,e){return window.go.main.App.DeleteFile(t,e)}function yt(t){return window.go.main.App.DeleteFolder(t)}function gt(t,e){return window.go.main.App.ExportFile(t,e)}function Ct(){return window.go.main.App.GetAppState()}function jt(t){return window.go.main.App.GetFolderPath(t)}function St(){return window.go.main.App.GetPeers()}function zt(){return window.go.main.App.GetSyncPhrase()}function it(){return window.go.main.App.IsMaster()}function At(t){return window.go.main.App.ListFolder(t)}function Et(t){return window.go.main.App.RemovePeer(t)}function Ft(){return window.go.main.App.StartReplicaBinding()}function Mt(t){return window.go.main.App.UnlockWithMnemonic(t)}const ie=[];function me(t,e=U){let n;const l=new Set;function s(f){if(le(t,f)&&(t=f,n)){const c=!ie.length;for(const u of l)u[1](),ie.push(u,t);if(c){for(let u=0;u<ie.length;u+=2)ie[u][0](ie[u+1]);ie.length=0}}}function o(f){s(f(t))}function i(f,c=U){const u=[f,c];return l.add(u),l.size===1&&(n=e(s)||U),f(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:i}}const ne=me("fresh"),ke=me(0),Ae=me(!1),O=me(!1),W=me(""),Ee=me("");function De(t){let e,n;return{c(){e=d("p"),n=D(t[1]),a(e,"class","error svelte-1na3fmb")},m(l,s){E(l,e,s),r(e,n)},p(l,s){s&2&&H(n,l[1])},d(l){l&&A(e)}}}function Pt(t){let e,n,l,s,o,i,f,c,u,p,m,y,w,_,g,S,h=t[1]&&De(t);return{c(){e=d("div"),n=d("h1"),n.textContent="Endershare",l=v(),s=d("p"),s.textContent="Encrypted P2P File Storage",o=v(),i=d("div"),f=d("button"),c=D(`Create New Vault
      `),u=d("span"),u.textContent="Generate a new encryption key",p=v(),m=d("button"),y=D(`Join Existing Vault
      `),w=d("span"),w.textContent="Connect to another device",_=v(),h&&h.c(),a(n,"class","svelte-1na3fmb"),a(s,"class","subtitle svelte-1na3fmb"),a(u,"class","btn-desc svelte-1na3fmb"),a(f,"class","setup-btn primary svelte-1na3fmb"),f.disabled=t[0],a(w,"class","btn-desc svelte-1na3fmb"),a(m,"class","setup-btn secondary svelte-1na3fmb"),m.disabled=t[0],a(i,"class","setup-options svelte-1na3fmb"),a(e,"class","setup-screen svelte-1na3fmb")},m(b,j){E(b,e,j),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(i,f),r(f,c),r(f,u),r(i,p),r(i,m),r(m,y),r(m,w),r(e,_),h&&h.m(e,null),g||(S=[F(f,"click",t[2]),F(m,"click",t[3])],g=!0)},p(b,[j]){j&1&&(f.disabled=b[0]),j&1&&(m.disabled=b[0]),b[1]?h?h.p(b,j):(h=De(b),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:U,o:U,d(b){b&&A(e),h&&h.d(),g=!1,Y(S)}}}function Nt(t,e,n){let l,s;X(t,O,f=>n(0,l=f)),X(t,W,f=>n(1,s=f));async function o(){O.set(!0),W.set("");try{const f=await kt();Ee.set(f),ne.set("unlocked")}catch(f){W.set(String(f))}finally{O.set(!1)}}async function i(){O.set(!0),W.set("");try{await Ft(),ne.set("binding")}catch(f){W.set(String(f))}finally{O.set(!1)}}return[l,s,o,i]}class Lt extends pe{constructor(e){super(),de(this,e,Nt,Pt,le,{})}}function Dt(t,e,n){return window.runtime.EventsOnMultiple(t,e,n)}function rt(t,e){return Dt(t,e,-1)}function $t(t){let e,n,l,s,o,i,f=(t[0]||"Loading...")+"",c,u,p,m,y,w,_,g,S,h;return{c(){e=d("div"),n=d("h1"),n.textContent="Waiting for Authorization",l=v(),s=d("p"),s.textContent="Enter this phrase on your master device to authorize this replica:",o=v(),i=d("div"),c=D(f),u=v(),p=d("div"),m=v(),y=d("p"),y.textContent="Waiting for master node to connect...",w=v(),_=d("button"),g=D("Cancel"),a(n,"class","svelte-yhfyra"),a(s,"class","instruction svelte-yhfyra"),a(i,"class","phrase-display svelte-yhfyra"),a(p,"class","spinner svelte-yhfyra"),a(y,"class","waiting-text svelte-yhfyra"),a(_,"class","cancel-btn svelte-yhfyra"),_.disabled=t[1],a(e,"class","binding-screen svelte-yhfyra")},m(b,j){E(b,e,j),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(i,c),r(e,u),r(e,p),r(e,m),r(e,y),r(e,w),r(e,_),r(_,g),S||(h=F(_,"click",t[2]),S=!0)},p(b,[j]){j&1&&f!==(f=(b[0]||"Loading...")+"")&&H(c,f),j&2&&(_.disabled=b[1])},i:U,o:U,d(b){b&&A(e),S=!1,h()}}}function Bt(t,e,n){let l;X(t,O,f=>n(1,l=f));let s="",o;Ce(async()=>{n(0,s=await zt()),o=rt("binding-complete",()=>{ne.set("locked")})}),tt(()=>{o&&o()});async function i(){O.set(!0),await bt(),ne.set("fresh"),O.set(!1)}return[s,l,i]}class It extends pe{constructor(e){super(),de(this,e,Bt,$t,le,{})}}function $e(t){let e,n;return{c(){e=d("p"),n=D(t[2]),a(e,"class","error svelte-fim5w1")},m(l,s){E(l,e,s),r(e,n)},p(l,s){s&4&&H(n,l[2])},d(l){l&&A(e)}}}function Ot(t){let e,n,l,s,o,i,f,c,u=t[1]?"Unlocking...":"Unlock",p,m,y,w,_,g,S,h=t[2]&&$e(t);return{c(){e=d("div"),n=d("h1"),n.textContent="Unlock Vault",l=v(),s=d("p"),s.textContent="Enter your 24-word recovery phrase to decrypt your files.",o=v(),i=d("textarea"),f=v(),c=d("button"),p=D(u),y=v(),h&&h.c(),w=v(),_=d("p"),_.textContent=`Only master nodes with the recovery phrase can view files.
    Replica nodes cannot decrypt file contents.`,a(n,"class","svelte-fim5w1"),a(s,"class","instruction svelte-fim5w1"),a(i,"class","mnemonic-input svelte-fim5w1"),a(i,"placeholder","Enter your recovery phrase..."),a(i,"rows","4"),i.disabled=t[1],a(c,"class","unlock-btn svelte-fim5w1"),c.disabled=m=t[1]||!t[0].trim(),a(_,"class","note svelte-fim5w1"),a(e,"class","mnemonic-screen svelte-fim5w1")},m(b,j){E(b,e,j),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),ce(i,t[0]),r(e,f),r(e,c),r(c,p),r(e,y),h&&h.m(e,null),r(e,w),r(e,_),g||(S=[F(i,"input",t[5]),F(i,"keydown",t[4]),F(c,"click",t[3])],g=!0)},p(b,[j]){j&2&&(i.disabled=b[1]),j&1&&ce(i,b[0]),j&2&&u!==(u=b[1]?"Unlocking...":"Unlock")&&H(p,u),j&3&&m!==(m=b[1]||!b[0].trim())&&(c.disabled=m),b[2]?h?h.p(b,j):(h=$e(b),h.c(),h.m(e,w)):h&&(h.d(1),h=null)},i:U,o:U,d(b){b&&A(e),h&&h.d(),g=!1,Y(S)}}}function Rt(t,e,n){let l,s;X(t,O,u=>n(1,l=u)),X(t,W,u=>n(2,s=u));let o="";async function i(){if(!o.trim()){W.set("Please enter your recovery phrase");return}O.set(!0),W.set("");try{await Mt(o.trim()),ne.set("unlocked")}catch(u){W.set(String(u))}finally{O.set(!1)}}function f(u){u.key==="Enter"&&i()}function c(){o=this.value,n(0,o)}return[o,l,s,i,f,c]}class Gt extends pe{constructor(e){super(),de(this,e,Rt,Ot,le,{})}}function Be(t,e,n){const l=t.slice();return l[20]=e[n],l}function Tt(t){let e,n=t[0],l=[];for(let s=0;s<n.length;s+=1)l[s]=Ie(Be(t,n,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();a(e,"class","peer-list svelte-16cmzd")},m(s,o){E(s,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,o){if(o&129){n=s[0];let i;for(i=0;i<n.length;i+=1){const f=Be(s,n,i);l[i]?l[i].p(f,o):(l[i]=Ie(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&A(e),Fe(l,s)}}}function Ut(t){let e;return{c(){e=d("p"),e.textContent="No connected devices",a(e,"class","empty svelte-16cmzd")},m(n,l){E(n,e,l)},p:U,d(n){n&&A(e)}}}function Ie(t){let e,n,l,s,o,i=t[20].peerId+"",f,c,u,p,m=(t[20].isOnline?"Online":t[20].lastSeen)+"",y,w,_,g,S,h;function b(){return t[15](t[20])}return{c(){e=d("div"),n=d("div"),l=d("span"),s=v(),o=d("span"),f=D(i),c=v(),u=d("div"),p=d("span"),y=D(m),w=v(),_=d("button"),_.textContent="\u2715",g=v(),a(l,"class","status-dot svelte-16cmzd"),ae(l,"online",t[20].isOnline),a(o,"class","peer-id svelte-16cmzd"),a(n,"class","peer-info svelte-16cmzd"),a(p,"class","last-seen svelte-16cmzd"),a(_,"class","remove-btn svelte-16cmzd"),a(_,"title","Remove device"),a(u,"class","peer-meta svelte-16cmzd"),a(e,"class","peer-item svelte-16cmzd")},m(j,N){E(j,e,N),r(e,n),r(n,l),r(n,s),r(n,o),r(o,f),r(e,c),r(e,u),r(u,p),r(p,y),r(u,w),r(u,_),r(e,g),S||(h=F(_,"click",b),S=!0)},p(j,N){t=j,N&1&&ae(l,"online",t[20].isOnline),N&1&&i!==(i=t[20].peerId+"")&&H(f,i),N&1&&m!==(m=(t[20].isOnline?"Online":t[20].lastSeen)+"")&&H(y,m)},d(j){j&&A(e),S=!1,h()}}}function Oe(t){let e;function n(o,i){return o[3]?Wt:Vt}let l=n(t),s=l(t);return{c(){e=d("div"),s.c(),a(e,"class","add-device-section svelte-16cmzd")},m(o,i){E(o,e,i),s.m(e,null)},p(o,i){l===(l=n(o))&&s?s.p(o,i):(s.d(1),s=l(o),s&&(s.c(),s.m(e,null)))},d(o){o&&A(e),s.d()}}}function Vt(t){let e,n,l;return{c(){e=d("button"),e.textContent="+ Add New Device",a(e,"class","add-device-btn svelte-16cmzd")},m(s,o){E(s,e,o),n||(l=F(e,"click",t[18]),n=!0)},p:U,d(s){s&&A(e),n=!1,l()}}}function Wt(t){let e,n,l,s,o,i,f,c,u;return{c(){e=d("div"),n=d("input"),l=v(),s=d("button"),o=D("Bind"),i=v(),f=d("button"),f.textContent="Cancel",a(n,"type","text"),a(n,"class","bind-input svelte-16cmzd"),a(n,"placeholder","Enter 4-word phrase..."),n.autofocus=!0,a(s,"class","action-btn svelte-16cmzd"),s.disabled=t[6],a(f,"class","action-btn secondary svelte-16cmzd"),a(e,"class","bind-input-row svelte-16cmzd")},m(p,m){E(p,e,m),r(e,n),ce(n,t[2]),r(e,l),r(e,s),r(s,o),r(e,i),r(e,f),n.focus(),c||(u=[F(n,"input",t[16]),F(s,"click",t[10]),F(f,"click",t[17])],c=!0)},p(p,m){m&4&&n.value!==p[2]&&ce(n,p[2]),m&64&&(s.disabled=p[6])},d(p){p&&A(e),c=!1,Y(u)}}}function Re(t){let e;return{c(){e=d("p"),e.textContent="Replica nodes sync data but cannot decrypt files without the recovery phrase.",a(e,"class","replica-note svelte-16cmzd")},m(n,l){E(n,e,l)},d(n){n&&A(e)}}}function Ge(t){let e,n,l,s,o,i,f,c,u,p,m,y,w,_,g;return{c(){e=d("div"),n=d("div"),l=d("h3"),l.textContent="Remove Device",s=v(),o=d("p"),i=D("Are you sure you want to remove device "),f=D(t[5]),c=D("?"),u=v(),p=d("div"),m=d("button"),m.textContent="Cancel",y=v(),w=d("button"),w.textContent="Remove",a(l,"class","svelte-16cmzd"),a(o,"class","svelte-16cmzd"),a(m,"class","cancel-btn svelte-16cmzd"),a(w,"class","remove-confirm-btn svelte-16cmzd"),a(p,"class","confirm-buttons svelte-16cmzd"),a(n,"class","confirm-modal svelte-16cmzd"),a(n,"role","document"),a(e,"class","confirm-overlay svelte-16cmzd"),a(e,"role","dialog"),a(e,"aria-modal","true")},m(S,h){E(S,e,h),r(e,n),r(n,l),r(n,s),r(n,o),r(o,i),r(o,f),r(o,c),r(n,u),r(n,p),r(p,m),r(p,y),r(p,w),_||(g=[F(m,"click",t[8]),F(w,"click",t[9]),F(n,"click",ge(t[13])),F(e,"click",t[8])],_=!0)},p(S,h){h&32&&H(f,S[5])},d(S){S&&A(e),_=!1,Y(g)}}}function Kt(t){let e,n,l,s,o,i,f,c,u,p,m,y,w,_,g,S,h,b,j=t[1]?"Master":"Replica",N,K,J,P,M,x;function Q(z,$){return z[0].length===0?Ut:Tt}let R=Q(t),I=R(t),T=t[1]&&Oe(t),B=!t[1]&&Re(),L=t[4]&&t[5]&&Ge(t);return{c(){e=d("div"),n=d("div"),l=d("div"),s=d("h2"),s.textContent="Settings",o=v(),i=d("button"),i.textContent="\u2715",f=v(),c=d("div"),u=d("h3"),u.textContent="Connected Devices",p=v(),I.c(),m=v(),T&&T.c(),y=v(),w=d("div"),_=d("h3"),_.textContent="Node Info",g=v(),S=d("p"),h=D("Node type: "),b=d("strong"),N=D(j),K=v(),B&&B.c(),J=v(),L&&L.c(),P=Me(),a(s,"class","svelte-16cmzd"),a(i,"class","close-btn svelte-16cmzd"),a(l,"class","modal-header svelte-16cmzd"),a(u,"class","svelte-16cmzd"),a(c,"class","section svelte-16cmzd"),a(_,"class","svelte-16cmzd"),a(S,"class","node-type svelte-16cmzd"),a(w,"class","section svelte-16cmzd"),a(n,"class","modal svelte-16cmzd"),a(e,"class","modal-overlay svelte-16cmzd")},m(z,$){E(z,e,$),r(e,n),r(n,l),r(l,s),r(l,o),r(l,i),r(n,f),r(n,c),r(c,u),r(c,p),I.m(c,null),r(c,m),T&&T.m(c,null),r(n,y),r(n,w),r(w,_),r(w,g),r(w,S),r(S,h),r(S,b),r(b,N),r(w,K),B&&B.m(w,null),E(z,J,$),L&&L.m(z,$),E(z,P,$),M||(x=[F(window,"keydown",t[12]),F(i,"click",t[11]),F(n,"click",ge(t[14])),F(e,"click",t[11])],M=!0)},p(z,[$]){R===(R=Q(z))&&I?I.p(z,$):(I.d(1),I=R(z),I&&(I.c(),I.m(c,m))),z[1]?T?T.p(z,$):(T=Oe(z),T.c(),T.m(c,null)):T&&(T.d(1),T=null),$&2&&j!==(j=z[1]?"Master":"Replica")&&H(N,j),z[1]?B&&(B.d(1),B=null):B||(B=Re(),B.c(),B.m(w,null)),z[4]&&z[5]?L?L.p(z,$):(L=Ge(z),L.c(),L.m(P.parentNode,P)):L&&(L.d(1),L=null)},i:U,o:U,d(z){z&&A(e),I.d(),T&&T.d(),B&&B.d(),z&&A(J),L&&L.d(z),z&&A(P),M=!1,Y(x)}}}function Ht(t,e,n){let l;X(t,O,P=>n(6,l=P));let s=[],o=!1,i="",f=!1,c=!1,u=null;Ce(async()=>{await p(),n(1,o=await it())});async function p(){try{n(0,s=await St())}catch(P){W.set(String(P))}}function m(P){n(5,u=P),n(4,c=!0)}function y(){n(4,c=!1),n(5,u=null)}async function w(){if(!u)return;const P=u;n(4,c=!1),n(5,u=null),O.set(!0);try{await Et(P),await p()}catch(M){W.set(String(M))}finally{O.set(!1)}}async function _(){if(!!i.trim()){O.set(!0);try{await ht(i.trim()),n(2,i=""),n(3,f=!1),await p()}catch(P){W.set(String(P))}finally{O.set(!1)}}}function g(){Ae.set(!1)}function S(P){P.key==="Escape"?g():P.key==="Enter"&&f&&_()}function h(P){ye.call(this,t,P)}function b(P){ye.call(this,t,P)}const j=P=>m(P.peerId);function N(){i=this.value,n(2,i)}return[s,o,i,f,c,u,l,m,y,w,_,g,S,h,b,j,N,()=>{n(3,f=!1),n(2,i="")},()=>n(3,f=!0)]}class qt extends pe{constructor(e){super(),de(this,e,Ht,Kt,le,{})}}function Te(t,e,n){const l=t.slice();return l[36]=e[n],l}function Ue(t,e,n){const l=t.slice();return l[39]=e[n],l[41]=n,l}function Yt(t){let e;return{c(){e=d("span"),e.textContent="/",a(e,"class","separator svelte-j2wk4r")},m(n,l){E(n,e,l)},d(n){n&&A(e)}}}function Ve(t){let e,n,l=t[39].name+"",s,o,i,f,c=t[41]>0&&Yt();function u(){return t[24](t[39])}return{c(){c&&c.c(),e=v(),n=d("button"),s=D(l),o=v(),a(n,"class","path-segment svelte-j2wk4r"),ae(n,"current",t[41]===t[2].length-1)},m(p,m){c&&c.m(p,m),E(p,e,m),E(p,n,m),r(n,s),r(n,o),i||(f=F(n,"click",u),i=!0)},p(p,m){t=p,m[0]&4&&l!==(l=t[39].name+"")&&H(s,l),m[0]&4&&ae(n,"current",t[41]===t[2].length-1)},d(p){c&&c.d(p),p&&A(e),p&&A(n),i=!1,f()}}}function Jt(t){let e,n,l,s,o;return{c(){e=d("button"),e.innerHTML='<span class="icon svelte-j2wk4r">\u{1F4C1}</span> New Folder',n=v(),l=d("button"),l.innerHTML='<span class="icon svelte-j2wk4r">+</span> Add File',a(e,"class","action-btn svelte-j2wk4r"),a(l,"class","action-btn svelte-j2wk4r")},m(i,f){E(i,e,f),E(i,n,f),E(i,l,f),s||(o=[F(e,"click",t[27]),F(l,"click",t[14])],s=!0)},p:U,d(i){i&&A(e),i&&A(n),i&&A(l),s=!1,Y(o)}}}function Qt(t){let e,n,l,s,o,i,f;return{c(){e=d("input"),n=v(),l=d("button"),l.textContent="Create",s=v(),o=d("button"),o.textContent="Cancel",a(e,"type","text"),a(e,"class","folder-input svelte-j2wk4r"),a(e,"placeholder","Folder name..."),e.autofocus=!0,a(l,"class","action-btn svelte-j2wk4r"),a(o,"class","action-btn svelte-j2wk4r")},m(c,u){E(c,e,u),ce(e,t[3]),E(c,n,u),E(c,l,u),E(c,s,u),E(c,o,u),e.focus(),i||(f=[F(e,"input",t[25]),F(e,"keydown",t[21]),F(l,"click",t[15]),F(o,"click",t[26])],i=!0)},p(c,u){u[0]&8&&e.value!==c[3]&&ce(e,c[3])},d(c){c&&A(e),c&&A(n),c&&A(l),c&&A(s),c&&A(o),i=!1,Y(f)}}}function Xt(t){let e,n=t[1],l=[];for(let s=0;s<n.length;s+=1)l[s]=Ke(Te(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Me()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);E(s,e,o)},p(s,o){if(o[0]&204802){n=s[1];let i;for(i=0;i<n.length;i+=1){const f=Te(s,n,i);l[i]?l[i].p(f,o):(l[i]=Ke(f),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){Fe(l,s),s&&A(e)}}}function Zt(t){let e;return{c(){e=d("div"),e.innerHTML=`<p>This folder is empty</p> 
        <p class="hint svelte-j2wk4r">Add files or create folders to get started</p>`,a(e,"class","empty-state svelte-j2wk4r")},m(n,l){E(n,e,l)},p:U,d(n){n&&A(e)}}}function We(t){let e,n,l;function s(){return t[29](t[36])}return{c(){e=d("button"),e.textContent="\u2193",a(e,"class","item-btn svelte-j2wk4r"),a(e,"title","Export")},m(o,i){E(o,e,i),n||(l=F(e,"click",s),n=!0)},p(o,i){t=o},d(o){o&&A(e),n=!1,l()}}}function Ke(t){let e,n,l=t[36].type==="folder"?"\u{1F4C1}":"\u{1F4C4}",s,o,i,f=t[36].name+"",c,u,p,m=Qe(t[36].size)+"",y,w,_,g=Xe(t[36].modifiedAt)+"",S,h,b,j,N,K,J,P,M=t[36].type==="file"&&We(t);function x(){return t[30](t[36])}function Q(){return t[31](t[36])}return{c(){e=d("div"),n=d("span"),s=D(l),o=v(),i=d("span"),c=D(f),u=v(),p=d("span"),y=D(m),w=v(),_=d("span"),S=D(g),h=v(),b=d("div"),M&&M.c(),j=v(),N=d("button"),N.textContent="\u2715",K=v(),a(n,"class","item-icon svelte-j2wk4r"),a(i,"class","item-name svelte-j2wk4r"),a(p,"class","item-size svelte-j2wk4r"),a(_,"class","item-date svelte-j2wk4r"),a(N,"class","item-btn delete svelte-j2wk4r"),a(N,"title","Delete"),a(b,"class","item-actions svelte-j2wk4r"),a(e,"class","file-item svelte-j2wk4r"),ae(e,"folder",t[36].type==="folder")},m(R,I){E(R,e,I),r(e,n),r(n,s),r(e,o),r(e,i),r(i,c),r(e,u),r(e,p),r(p,y),r(e,w),r(e,_),r(_,S),r(e,h),r(e,b),M&&M.m(b,null),r(b,j),r(b,N),r(e,K),J||(P=[F(N,"click",x),F(e,"dblclick",Q)],J=!0)},p(R,I){t=R,I[0]&2&&l!==(l=t[36].type==="folder"?"\u{1F4C1}":"\u{1F4C4}")&&H(s,l),I[0]&2&&f!==(f=t[36].name+"")&&H(c,f),I[0]&2&&m!==(m=Qe(t[36].size)+"")&&H(y,m),I[0]&2&&g!==(g=Xe(t[36].modifiedAt)+"")&&H(S,g),t[36].type==="file"?M?M.p(t,I):(M=We(t),M.c(),M.m(b,j)):M&&(M.d(1),M=null),I[0]&2&&ae(e,"folder",t[36].type==="folder")},d(R){R&&A(e),M&&M.d(),J=!1,Y(P)}}}function He(t){let e,n,l,s,o,i;return{c(){e=d("div"),n=D(t[9]),l=v(),s=d("button"),s.textContent="\u2715",a(s,"class","svelte-j2wk4r"),a(e,"class","error-bar svelte-j2wk4r")},m(f,c){E(f,e,c),r(e,n),r(e,l),r(e,s),o||(i=F(s,"click",t[32]),o=!0)},p(f,c){c[0]&512&&H(n,f[9])},d(f){f&&A(e),o=!1,i()}}}function qe(t){let e,n;return e=new qt({}),{c(){ve(e.$$.fragment)},m(l,s){ue(e,l,s),n=!0},i(l){n||(Z(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function Ye(t){let e,n,l,s,o=t[7].type==="folder"?"Folder":"File",i,f,c,u,p=t[7].name+"",m,y,w,_,g,S,h,b,j;return{c(){e=d("div"),n=d("div"),l=d("h2"),s=D("Delete "),i=D(o),f=v(),c=d("p"),u=D('Are you sure you want to delete "'),m=D(p),y=D('"?'),w=v(),_=d("div"),g=d("button"),g.textContent="Cancel",S=v(),h=d("button"),h.textContent="Delete",a(l,"class","svelte-j2wk4r"),a(c,"class","svelte-j2wk4r"),a(g,"class","cancel-btn svelte-j2wk4r"),a(h,"class","delete-btn svelte-j2wk4r"),a(_,"class","modal-buttons svelte-j2wk4r"),a(n,"class","modal confirm-modal svelte-j2wk4r"),a(n,"role","document"),a(e,"class","modal-overlay svelte-j2wk4r"),a(e,"role","dialog"),a(e,"aria-modal","true")},m(N,K){E(N,e,K),r(e,n),r(n,l),r(l,s),r(l,i),r(n,f),r(n,c),r(c,u),r(c,m),r(c,y),r(n,w),r(n,_),r(_,g),r(_,S),r(_,h),b||(j=[F(g,"click",t[18]),F(h,"click",t[19]),F(n,"click",ge(t[23])),F(e,"click",t[18])],b=!0)},p(N,K){K[0]&128&&o!==(o=N[7].type==="folder"?"Folder":"File")&&H(i,o),K[0]&128&&p!==(p=N[7].name+"")&&H(m,p)},d(N){N&&A(e),b=!1,Y(j)}}}function Je(t){let e,n,l,s,o,i,f,c,u,p,m,y,w,_;return{c(){e=d("div"),n=d("div"),l=d("h2"),l.textContent="Save Your Recovery Phrase",s=v(),o=d("p"),o.textContent="Write down these words and keep them safe. You will need them to recover your vault.",i=v(),f=d("div"),c=D(t[8]),u=v(),p=d("p"),p.textContent="Anyone with this phrase can access your files. Never share it.",m=v(),y=d("button"),y.textContent="I've Saved My Phrase",a(l,"class","svelte-j2wk4r"),a(o,"class","warning svelte-j2wk4r"),a(f,"class","mnemonic-display svelte-j2wk4r"),a(p,"class","caution svelte-j2wk4r"),a(y,"class","primary-btn svelte-j2wk4r"),a(n,"class","modal svelte-j2wk4r"),a(e,"class","modal-overlay svelte-j2wk4r")},m(g,S){E(g,e,S),r(e,n),r(n,l),r(n,s),r(n,o),r(n,i),r(n,f),r(f,c),r(n,u),r(n,p),r(n,m),r(n,y),w||(_=[F(y,"click",t[20]),F(n,"click",ge(t[22])),F(e,"click",t[20])],w=!0)},p(g,S){S[0]&256&&H(c,g[8])},d(g){g&&A(e),w=!1,Y(_)}}}function xt(t){let e,n,l,s,o,i,f,c,u,p,m,y,w,_,g,S,h,b,j,N,K,J,P=t[2],M=[];for(let k=0;k<P.length;k+=1)M[k]=Ve(Ue(t,P,k));function x(k,G){return k[4]?Qt:Jt}let Q=x(t),R=Q(t);function I(k,G){return k[1].length===0?Zt:Xt}let T=I(t),B=T(t),L=t[9]&&He(t),z=t[10]&&qe(),$=t[6]&&t[7]&&Ye(t),q=t[5]&&Je(t);return{c(){e=d("div"),n=d("div"),l=d("div"),s=d("button"),o=d("span"),o.textContent="\u2191",f=v(),c=d("div");for(let k=0;k<M.length;k+=1)M[k].c();u=v(),p=d("div"),R.c(),m=v(),y=d("button"),y.innerHTML='<span class="icon svelte-j2wk4r">\u2699</span>',w=v(),_=d("div"),B.c(),g=v(),L&&L.c(),S=v(),z&&z.c(),h=v(),$&&$.c(),b=v(),q&&q.c(),j=Me(),a(o,"class","icon svelte-j2wk4r"),a(s,"class","nav-btn svelte-j2wk4r"),s.disabled=i=t[0]===0,a(c,"class","breadcrumb svelte-j2wk4r"),a(l,"class","path-section svelte-j2wk4r"),a(y,"class","action-btn settings svelte-j2wk4r"),a(p,"class","actions svelte-j2wk4r"),a(n,"class","top-bar svelte-j2wk4r"),a(_,"class","file-list svelte-j2wk4r"),a(e,"class","file-browser svelte-j2wk4r")},m(k,G){E(k,e,G),r(e,n),r(n,l),r(l,s),r(s,o),r(l,f),r(l,c);for(let V=0;V<M.length;V+=1)M[V]&&M[V].m(c,null);r(n,u),r(n,p),R.m(p,null),r(p,m),r(p,y),r(e,w),r(e,_),B.m(_,null),r(e,g),L&&L.m(e,null),E(k,S,G),z&&z.m(k,G),E(k,h,G),$&&$.m(k,G),E(k,b,G),q&&q.m(k,G),E(k,j,G),N=!0,K||(J=[F(s,"click",t[12]),F(y,"click",t[28])],K=!0)},p(k,G){if((!N||G[0]&1&&i!==(i=k[0]===0))&&(s.disabled=i),G[0]&2052){P=k[2];let V;for(V=0;V<P.length;V+=1){const C=Ue(k,P,V);M[V]?M[V].p(C,G):(M[V]=Ve(C),M[V].c(),M[V].m(c,null))}for(;V<M.length;V+=1)M[V].d(1);M.length=P.length}Q===(Q=x(k))&&R?R.p(k,G):(R.d(1),R=Q(k),R&&(R.c(),R.m(p,m))),T===(T=I(k))&&B?B.p(k,G):(B.d(1),B=T(k),B&&(B.c(),B.m(_,null))),k[9]?L?L.p(k,G):(L=He(k),L.c(),L.m(e,null)):L&&(L.d(1),L=null),k[10]?z?G[0]&1024&&Z(z,1):(z=qe(),z.c(),Z(z,1),z.m(h.parentNode,h)):z&&(lt(),ee(z,1,1,()=>{z=null}),st()),k[6]&&k[7]?$?$.p(k,G):($=Ye(k),$.c(),$.m(b.parentNode,b)):$&&($.d(1),$=null),k[5]?q?q.p(k,G):(q=Je(k),q.c(),q.m(j.parentNode,j)):q&&(q.d(1),q=null)},i(k){N||(Z(z),N=!0)},o(k){ee(z),N=!1},d(k){k&&A(e),Fe(M,k),R.d(),B.d(),L&&L.d(),k&&A(S),z&&z.d(k),k&&A(h),$&&$.d(k),k&&A(b),q&&q.d(k),k&&A(j),K=!1,Y(J)}}}function Qe(t){if(t===0)return"";const e=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,n)).toFixed(1)+" "+e[n]}function Xe(t){return t?new Date(t).toLocaleDateString():""}function en(t,e,n){let l,s,o,i;X(t,ke,C=>n(0,l=C)),X(t,Ee,C=>n(8,s=C)),X(t,W,C=>n(9,o=C)),X(t,Ae,C=>n(10,i=C));let f=[],c=[],u="",p=!1,m=!1,y=!1,w=null,_=null;Ce(async()=>{await it(),s&&n(5,m=!0),_=rt("data-updated",()=>{g(l)})}),tt(()=>{_&&_()});async function g(C){try{n(1,f=await At(C)),n(2,c=await jt(C))}catch(_e){W.set(String(_e))}}function S(C){ke.set(C)}function h(){if(c.length>1){const C=c[c.length-2];ke.set(C.folderId)}}function b(C){C.type==="folder"&&ke.set(C.folderId)}async function j(){O.set(!0);try{await _t(l),await g(l)}catch(C){W.set(String(C))}finally{O.set(!1)}}async function N(){if(!!u.trim()){O.set(!0);try{await vt(u.trim(),l),n(3,u=""),n(4,p=!1),await g(l)}catch(C){W.set(String(C))}finally{O.set(!1)}}}async function K(C){O.set(!0);try{await gt(C.name,l)}catch(_e){W.set(String(_e))}finally{O.set(!1)}}function J(C){n(7,w=C),n(6,y=!0)}function P(){n(6,y=!1),n(7,w=null)}async function M(){if(!w)return;const C=w;n(6,y=!1),n(7,w=null),O.set(!0);try{C.type==="folder"?await yt(C.folderId):await wt(C.name,l),await g(l)}catch(_e){W.set(String(_e))}finally{O.set(!1)}}function x(){n(5,m=!1),Ee.set("")}function Q(C){C.key==="Enter"?N():C.key==="Escape"&&(n(4,p=!1),n(3,u=""))}function R(C){ye.call(this,t,C)}function I(C){ye.call(this,t,C)}const T=C=>S(C.folderId);function B(){u=this.value,n(3,u)}const L=()=>{n(4,p=!1),n(3,u="")},z=()=>n(4,p=!0),$=()=>Ae.set(!0),q=C=>K(C),k=C=>J(C),G=C=>b(C),V=()=>W.set("");return t.$$.update=()=>{t.$$.dirty[0]&1&&g(l)},[l,f,c,u,p,m,y,w,s,o,i,S,h,b,j,N,K,J,P,M,x,Q,R,I,T,B,L,z,$,q,k,G,V]}class tn extends pe{constructor(e){super(),de(this,e,en,xt,le,{},null,[-1,-1])}}function nn(t){let e;return{c(){e=d("div"),e.textContent="Loading...",a(e,"class","loading svelte-k68acu")},m(n,l){E(n,e,l)},i:U,o:U,d(n){n&&A(e)}}}function ln(t){let e,n;return e=new tn({}),{c(){ve(e.$$.fragment)},m(l,s){ue(e,l,s),n=!0},i(l){n||(Z(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function sn(t){let e,n;return e=new Gt({}),{c(){ve(e.$$.fragment)},m(l,s){ue(e,l,s),n=!0},i(l){n||(Z(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function rn(t){let e,n;return e=new It({}),{c(){ve(e.$$.fragment)},m(l,s){ue(e,l,s),n=!0},i(l){n||(Z(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function on(t){let e,n;return e=new Lt({}),{c(){ve(e.$$.fragment)},m(l,s){ue(e,l,s),n=!0},i(l){n||(Z(e.$$.fragment,l),n=!0)},o(l){ee(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function cn(t){let e,n,l,s;const o=[on,rn,sn,ln,nn],i=[];function f(c,u){return c[0]==="fresh"?0:c[0]==="binding"?1:c[0]==="locked"?2:c[0]==="unlocked"?3:4}return n=f(t),l=i[n]=o[n](t),{c(){e=d("main"),l.c(),a(e,"class","svelte-k68acu")},m(c,u){E(c,e,u),i[n].m(e,null),s=!0},p(c,[u]){let p=n;n=f(c),n!==p&&(lt(),ee(i[p],1,1,()=>{i[p]=null}),st(),l=i[n],l||(l=i[n]=o[n](c),l.c()),Z(l,1),l.m(e,null))},i(c){s||(Z(l),s=!0)},o(c){ee(l),s=!1},d(c){c&&A(e),i[n].d()}}}function an(t,e,n){let l;return X(t,ne,s=>n(0,l=s)),Ce(async()=>{const s=await Ct();ne.set(s)}),[l]}class un extends pe{constructor(e){super(),de(this,e,an,cn,le,{})}}new un({target:document.getElementById("app")});
